<!DOCTYPE html PUBLIC
                "-//W3C//DTD XHTML 1.0 Transitional//EN"
                "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- (c) Copyright 2010 SailPoint Technologies, Inc., All Rights Reserved. -->
<!--
    Work item rendering dispatcher for items generated by workflows.
    Prior to 5.0 this was hard wired to show a role approval page, 
    now we forward to workItemForm.xhtml if the item has a form and
    fall back to roleApproval.xhtml if it does not.

    This is for backward compatibility until we can get the
    work item renering pages cleaned up.  We'll first go to 
    workItem.xhtml which is hard wired in faces-config.xml.
    This will check various things including a form but 
    a non-null renderer has priority over a form.  Since
    items created by workflows all set workflow.xhtml as
    the renderer, we'll end up here and have to do the form
    check again.  We could avoid this level if workItem.xhtml
    let forms have priority over a renderer but I'm not sure
    that's a good idea.
-->
    
<html 
  xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:sp="http://sailpoint.com/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core" 
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html">
<body>

<ui:composition>
  <c:choose>

    <c:when test="#{workItemDispatch.form}">
      <ui:include src="workItemForm.xhtml"/>
    </c:when>

    <c:otherwise>
      <ui:include src="roleApproval.xhtml"/>
    </c:otherwise>

  </c:choose>
</ui:composition>

</body>
</html>
